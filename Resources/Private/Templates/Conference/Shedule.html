{namespace u=Tx_FrabIntegration_ViewHelpers}
<f:layout name="Default" />

This Template is responsible for creating a table of domain objects.

If you modify this template, do not forget to change the overwrite settings
in /Configuration/ExtensionBuilder/settings.yaml:
  Resources:
    Private:
      Templates:
        List.html: keep

Otherwise your changes will be overwritten the next time you save the extension in the extension builder

<f:section name="main">
<div class="frab-scheduler">

<f:flashMessages renderMode="div" />

	<f:for each="{conferences}" as="conference">
	<h1>Veranstaltungen auf der {conference.title}</h1>

		<div class="pagination">
		<ul >
			<f:for each="{conference.days}" as="day" iteration="iterator">
					<li><f:link.action action="shedule" arguments="{currentDay: day.index}">Tag {iterator.cycle}</f:link.action></li>
			</f:for>
		</ul>
		<p>Bitte die entsprechenden Tage auswählen. Alle Veranstaltungen des Tages erscheinen dann in unserer Programmtabelle. Diese lässt sich vertikal und horizontal Scrollen. Benutzen Sie dafür ihr Mausrad oder die Scrollbalken ihres Browsers.</p>
		</div>
		<div class="scrollable">
		<table class="scheduler-table">
		<f:for each="{conference.days}" as="day">
			<f:if condition="{day.index} == {currentDay}">
				<thead>
				<tr>	
				<th>Zeit</th>
				<f:for each="{day.rooms}" as="room">
					<f:if condition="{room.events}">
					<th>{room.name}</th>
					</f:if>
				</f:for>
				</tr>
				</thead>
				<tbody>
				<f:for each="{timeline}" as="timeSlot">
					<tr>
					<th>{timeSlot -> f:format.date(format:'H:i')}</th>
					<f:for each="{day.rooms}" as="room">
						<f:if condition="{room.events}">
							<f:for each="{room.events}" as="event" iteration="iterator">
								<f:if condition="{f:format.date(date:event.start, format:'H:i')} == {f:format.date(date:timeSlot, format:'H:i')}">
									<f:then>
										<td rowspan="<u:rowspan duration='{event.duration}'/>" class="event-{f:format.date(date:event.duration, format:'H-i')}">
											<f:link.action controller="Event" action="show" arguments="{eventGuid:event.guid}">{event.title}</f:link.action>
										</td>
									</f:then>
									<f:else>
										<f:if condition="{iterator.index} == 0">
											<f:then>
												<f:if condition="<u:slotFree events='{room.events}' timeslot='{timeSlot}'/>">
													<td></td>
												</f:if>
											</f:then>
										</f:if>
									</f:else>
								</f:if>
							</f:for>
	  					</f:if>
  					</f:for>
  					</tr>
				</f:for>
				</tbody>
			</f:if>
		</f:for>
	</table>
	</div>
</f:for>
</div>
<script src="https:///ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-throttle-debounce/1.1/jquery.ba-throttle-debounce.min.js"></script>
<script src="/typo3conf/ext/frab_integration/Resources/Public/Js/jquery.stickyheader.js"></script>
</f:section>
